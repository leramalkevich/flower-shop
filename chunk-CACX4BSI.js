import{a as l,m as s}from"./chunk-ZPXGML5V.js";import{$ as a,W as p,i,n}from"./chunk-UEYGX62B.js";var g=class o{constructor(e){this.http=e;this.isLogged=!!localStorage.getItem(this.accessTokenKey)}accessTokenKey="accessToken";refreshTokenKey="refreshToken";userIdKey="userId";isLogged$=new i;isLogged=!1;login(e,t,r){return this.http.post(s.api+"login",{email:e,password:t,rememberMe:r})}signup(e,t,r){return this.http.post(s.api+"signup",{email:e,password:t,passwordRepeat:r})}logout(){let e=this.getTokens();return e&&e.refreshToken?this.http.post(s.api+"logout",{refreshToken:e.refreshToken}):n(()=>"Can not find token")}refresh(){let e=this.getTokens();if(e&&e.refreshToken)return this.http.post(s.api+"refresh",{refreshToken:e.refreshToken});throw n(()=>"Can not use token")}getIsLoggedIn(){return this.isLogged}setTokens(e,t){localStorage.setItem(this.accessTokenKey,e),localStorage.setItem(this.refreshTokenKey,t),this.isLogged=!0,this.isLogged$.next(!0)}removeTokens(){localStorage.removeItem(this.accessTokenKey),localStorage.removeItem(this.refreshTokenKey),this.isLogged=!1,this.isLogged$.next(!1)}getTokens(){return{accessToken:localStorage.getItem(this.accessTokenKey),refreshToken:localStorage.getItem(this.refreshTokenKey)}}get userId(){return localStorage.getItem(this.userIdKey)}set userId(e){e?localStorage.setItem(this.userIdKey,e):localStorage.removeItem(this.userIdKey)}static \u0275fac=function(t){return new(t||o)(a(l))};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};export{g as a};
